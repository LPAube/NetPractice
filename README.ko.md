# NetPractice 가이드

![netpractice logo](img/NetPractice.png)

<div id="top"></div>

---

## 프로젝트에 기여하기

이 가이드에 기여하시고자 하는 분께서는 다음 항목을 만들어 주신다면 감사하겠습니다.

- [ ] README.md를 불어로 번역한 README.fr.md
- [ ] README.md를 국어로 번역한 README.ko.md
- [ ] README.md를 노어로 번역한 README.ru.md

## 목차

- [주요 개념](#주요-개념)
  - [TCP](#tcp-전송-계층)
  - [IP 주소](#ip-주소-네트워크-계층)
  - [서브넷 마스크](#서브넷-마스크)
  - [스위치](#스위치)
  - [라우터](#라우터)
- [예제](#예제)

## 주요 개념

### TCP: 전송 계층

</br>
<p align="center">
  <img src="./img/tcp-ip-stack.png" height=300 width=200 alt="mask">
</p>
</br>

TCP는 **Transmission Control Protocol**의 약자다. 이것은 애플리케이션과 디바이스가 네트워크를 통해 메시지를 주고 받을 수 있도록 해주는 통신 표준이다. 인터넷을 통해 패킷을 보낼 때 사용한다.

TCP는 네트워크를 통해 보내는 데이터의 무결성을 보장한다. 데이터를 송신하기 전, TCP는 송신자와 수신자 사이에 연결을 생성하고, 이 연결은 통신이 시작하기 전까지 유지된다. 이후 데이터 손실 없이 많은 양의 데이터를 작은 패킷 단위로 쪼개어 보내게 된다.

<div align="right">
  <b><a href="#top">↥ 목차로 돌아가기</a></b>
</div>
</br>

---

### IP 주소: 네트워크 계층

</br>
<p align="center">
  <kbd><img src="https://github.com/lpaube/NetPractice/blob/main/img/ip1.png?raw=true" height=250 alt="mask"></kbd>
</p>
</br>

IP는 TCP와 같이 인터넷 프로토콜의 일부이다. 이 둘을 함께 TCP/IP로 칭한다. 인터넷 프로토콜은 패킷화, 주소 부여, 전송, 라우팅, 네트워크를 통한 데이터 수신을 담당한다.

IP 주소 부여는 네트워크상의 디바이스에게 주소를 부여하는 논리적인 방법이다. 인터넷에 연결된 디바이스는 각자 고유한 IP 주소가 필요하다.

IP 주소는 두 부분으로 구성된다. 한 부분은 컴퓨터 등의 디바이스에 부여된 번호, 다른 부분은 이들이 소속된 네트워크의 번호이다. [서브넷 마스크](#서브넷-마스크)를 통해 TCP/IP에서 어디까지가 첫 부분이고 어디부터가 나머지 부분인지 구분할 수 있다.
</br>
</br>

#### IPv4 vs. IPv6

IP 주소에는 IPv4와 IPv6의 두 가지 버젼이 있다.
<br>

<p align="center">
  <kbd><img src="https://github.com/lpaube/NetPractice/blob/main/img/ip_version.png?raw=true" height=100 alt="ip_versions"></kbd>
</p>
<br>

Internet Protocol version 4 (IPv4)는 32비트 정수를 사용해 IP 주소를 부여한다. 하지만 인터넷이 성장하여 사용 가능한 IPv4 주소가 고갈됨에 따라 IP의 새로운 버젼 IPv6가 등장했다. IPv6는 128비트 정수를 사용하는 체계로 1998년에 표준화되었다. 하지만, NetPractice에서는 IPv4 체계만을 사용한다.
</br>
</br>

#### 공인 IP vs. 사설 IP

공인 IP는 인터넷상 어디서나 직접 접근할 수 있는 주소로서 인터넷 서비스 공급자 (ISP)가 네트워크 라우터에 부여하는 주소다. 공인 IP는 한 네트워크 내부에서 인터넷으로, 또는 그 반대로 통신하게 해 준다.

사설 IP는 네트워크 라우터가 디바이스에 부여하는 주소다. 같은 네트워크 내의 모든 디바이스는 고유한 사설 IP를 부여받는다. 이를 통해 네트워크 내부에서 각 디바이스들이 서로 통신할 수 있다.

한 네트워크를 인터넷에 연결할 때 사설 IP로 사용해야하는 주소는 사용할 수 없다. 다음 IP 주소는 사설 IP로 사용하도록 정의된 주소다.

```
192.168.0.0 – 192.168.255.255 (65,536개 주소)
172.16.0.0 – 172.31.255.255   (1,048,576개 주소)
10.0.0.0 – 10.255.255.255     (16,777,216개 주소)
```

<div align="right">
  <b><a href="#top">↥ 목차로 돌아가기</a></b>
</div>
</br>

---

### 서브넷 마스크

</br>
<p align="center">
  <kbd><img src="https://github.com/lpaube/NetPractice/blob/main/img/mask1.png?raw=true" height=250 alt="mask"></kbd>
</p>
</br>

서브넷 마스크는 32비트 (4바이트)의 정수 주소로서 IP 주소값 중 어느 부분이 네트워크 주소이고 어느 부분이 호스트 주소인지 구분할 때 사용한다. 서브넷 마스크는 네트워크나 서브넷 안에서 사용할 수 있는 IP 주소의 범위를 정의한다.
</br>
</br>

#### 네트워크 주소를 찾는 법

위에 표시된 _Interface A1_ 은 다음 속성을 가지고 있다.

```
IP address | 104.198.241.125
Mask       | 255.255.255.128
```

IP 주소 중 어느 부분이 네트워크 주소인지 알기 위해 여기에 마스크를 적용해야 한다. 우선 마스크를 2진수로 표시한다.

```
Mask | 11111111.11111111.11111111.10000000
```

비트 값이 1로 설정된 부분은 네트워크 주소를, 0으로 설정된 부분은 호스트 주소를 의미한다. IP 주소 또한 2진수로 표시하면:

```
IP address | 01101000.11000110.11110001.01111101
Mask       | 11111111.11111111.11111111.10000000
```

이제 마스크와 IP 주소에 [비트 AND 연산](https://en.wikipedia.org/wiki/Bitwise_operation#AND)을 적용하여 네트워크 주소를 구할 수 있다.

```
Network address | 01101000.11000110.11110001.00000000
```

이는 10진수로 `104.198.241.0`로 표현할 수 있다.
</br>
</br>

#### 호스트 주소의 범위 구하기

이 네트워크에서 사용할 수 있는 호스트 주소의 범위를 구하려면 호스트 주소에 사용할 수 있는 비트가 어디까지인지 파악해야 한다. 이전 예시에서 사용된 IP 주소와 마스크를 보면:

```
IP address | 01101000.11000110.11110001.01111101
Mask       | 11111111.11111111.11111111.10000000
```

호스트 주소의 범위는 마스크의 마지막 7개 비트 (연속하여 0이 나타나는 부분)으로 파악할 수 있다. 그러므로 호스트 주소의 범위는:

```
이진법  | 0000000 - 1111111
십진법  | 0 - 127
```

이 네트워크에 사용할 수 있는 IP 주소의 범위를 구하려면 네트워크 주소에 호스트 주소의 범위를 더하면 된다. 따라서 가용 IP 주소의 범위는 `104.198.241.0 - 104.198.241.127`가 된다.

<ins>하지만</ins>, 이 범위에서 경계값은 특별한 목적을 위해 사용해야 하므로 어느 인터페이스에게 부여해서는 안 된다.

```
104.198.241.0   | 네트워크 자체에게 부여된 주소
104.198.241.127 | 브로드캐스트 주소(네트워크 내 모든 호스트에게 패킷을 보내기 위한 주소)
```

그러므로 실제 가용 IP 주소의 범위는 `104.198.241.1 - 104.198.241.126`가 된다. [IP calculator](https://www.calculator.net/ip-subnet-calculator.html)를 사용하면 이를 계산해낼 수 있다.
</br>
</br>

#### CIDR 표기법 (/24)

마스크는 Classless Inter-Domain Routing (CIDR) 표기법을 통해서도 표기할 수 있다. CIDR은 슬래시 "/" 뒤에 네트워크 주소로 사용할 비트의 개수를 표기함으로서 마스크를 표현한다.

따라서 위 예시에서 사용한 마스크 `255.255.255.128`은 앞 25개의 비트를 네트워크 주소로 사용하므로 CIDR 표기법에서는 `/25`로 표기할 수 있다.

<div align="right">
  <b><a href="#top">↥ 목차로 돌아가기</a></b>
</div>
</br>

---

### 스위치

</br>
<p align="center">
  <kbd><img src="https://github.com/lpaube/NetPractice/blob/main/img/switch1.png?raw=true" height=150 alt="switch"></kbd>
</p>
</br>

스위치는 한 네트워크 내부의 여러 디바이스를 연결한다. 라우터와 달리 스위치는 로컬 네트워크에 패킷을 배분하는 일만 할 수 있기 때문에 인터페이스를 가지지 않고 네트워크 외부에 직접 통신할 수 있는 능력도 없다.

<div align="right">
  <b><a href="#top">↥ 목차로 돌아가기</a></b>
</div>
</br>

---

### 라우터

</br>
<p align="center">
  <kbd><img src="https://github.com/lpaube/NetPractice/blob/main/img/route1.png?raw=true" height=200 alt="router"></kbd>
</p>
</br>

한 네트워크에서 여러 디바이스를 연결하는 스위치처럼 라우터는 여러 네트워크를 연결하는 역할을 맡는다. 라우터는 자신이 연결된 각 네트워크에 대해 인터페이스를 가진다.

라우터는 각 네트워크를 구분하는 역할을 하기 때문에 각 인터페이스에 할당된 IP 주소의 범위가 겹쳐서는 안 된다. IP 주소의 범위가 겹친다면 해당 인터페이스들은 같은 네트워크에 있는 것이다.
</br>
</br>

#### 라우팅 테이블

</br>
<p align="center">
  <kbd><img src="https://github.com/lpaube/NetPractice/blob/main/img/routing_table1.png?raw=true" height=150 alt="routing_table"></kbd>
</p>
</br>

라우팅 테이블은 라우터나 호스트가 가지고 있는, 특정 목적지 네트워크로 향하는 경로의 목록이다. NetPractice에서는 라우팅 테이블은 2개 요소로 이루어져 있다.

- **Destination**: Destination은 패킷의 최종 목적지가 될 호스트의 네트워크 주소를 나타낸다. `default`나 `0.0.0.0/0`는 어떤 IP 목적지 주소로 갈 수 있는 경로가 없을 시에 선택되는 경로다. 기본 경로는 특정 목적지를 표시하지 않고 next-hop 주소로 패킷을 전달할 것이다. 기본 경로는 어떤 네트워크에도 적용될 수 있다.

- **Next hop**: Next hop은 패킷이 전달될 수 있는 다음 라우터의 IP 주소다. 모든 라우터는 라우팅 테이블에 next hop 주소를 포함하여 관리해야 한다.

<div align="right">
  <b><a href="#top">↥ 목차로 돌아가기</a></b>
</div>
</br>

